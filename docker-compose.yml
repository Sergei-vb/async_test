version: '3'
services:
  web:
    image: tornado_alpine
    environment:
    - PORT=8888
    network_mode: "host"

    entrypoint:
      - sh
      - -c
      - "./hello_world.py --logging=info --log-file-prefix=/var/log/hello_world.log &
                    celery worker -A messaging.tasks -E -l=DEBUG"
    volumes:
     - .:/app
     - /var/log/hello_world:/var/log/
     - /var/run/docker.sock:/var/run/docker.sock
